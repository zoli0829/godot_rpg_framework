[gd_scene load_steps=12 format=3 uid="uid://c2r4oj44owm85"]

[ext_resource type="Script" uid="uid://ck5xbirpvmua8" path="res://Player/player.gd" id="1_l8h54"]
[ext_resource type="Script" uid="uid://ddufoweys5rgd" path="res://Player/smooth_camera_arm.gd" id="2_4ntmi"]
[ext_resource type="PackedScene" uid="uid://c153mnwgj37cq" path="res://Components/health_component.tscn" id="2_k53q1"]
[ext_resource type="Script" uid="uid://cxr7pdfi0q5xh" path="res://Resources/CharacterStats.gd" id="2_od3ui"]
[ext_resource type="PackedScene" uid="uid://cwef8426rdoyn" path="res://Player/rig.tscn" id="3_btcbx"]
[ext_resource type="Script" uid="uid://b1n2xjomfb150" path="res://Player/attack_cast.gd" id="4_gwnis"]
[ext_resource type="PackedScene" uid="uid://cbj1c2fuwamvk" path="res://Player/area_attack.tscn" id="6_fhl08"]
[ext_resource type="PackedScene" uid="uid://ctw0w5r82ojew" path="res://Player/dash.tscn" id="7_vtle1"]

[sub_resource type="Resource" id="Resource_00tjw"]
script = ExtResource("2_od3ui")
metadata/_custom_type_script = "uid://cxr7pdfi0q5xh"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hvfyp"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_l8h54"]

[node name="Player" type="CharacterBody3D" groups=["Player"]]
collision_layer = 5
script = ExtResource("1_l8h54")
stats = SubResource("Resource_00tjw")

[node name="HealthComponent" parent="." instance=ExtResource("2_k53q1")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_hvfyp")

[node name="SmoothCameraArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.906308, 0.422618, 0, -0.422618, 0.906308, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_l8h54")
spring_length = 4.0
script = ExtResource("2_4ntmi")
target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="Camera3D" type="Camera3D" parent="SmoothCameraArm"]

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("3_btcbx")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(0.01705, 0.896591, -0.0156451)
bones/1/rotation = Quaternion(-0.0527087, 0.0018264, 0.0274964, 0.99823)
bones/2/rotation = Quaternion(0.00373182, -0.00118167, -0.0269588, 0.999629)
bones/3/position = Vector3(7.63543e-10, 0.187102, -8.97715e-08)
bones/3/rotation = Quaternion(-0.195282, 0.0115419, -0.0399074, 0.979867)
bones/4/rotation = Quaternion(0.371075, -0.00488178, 0.120453, 0.920745)
bones/6/rotation = Quaternion(-0.169385, -0.0227673, -0.0790132, 0.982114)
bones/7/position = Vector3(0.0170499, 0.896591, -0.0156449)
bones/8/position = Vector3(0.0170499, 0.896591, -0.015645)
bones/9/position = Vector3(0.148194, 0.962278, -0.000336256)
bones/9/rotation = Quaternion(0.999019, -0.0117436, -0.0356791, -0.0234394)
bones/10/position = Vector3(-1.87432e-08, 0.264591, 1.92742e-08)
bones/10/rotation = Quaternion(-2.29418e-08, -0.00502552, 1.25534e-08, 0.999987)
bones/11/position = Vector3(-2.30794e-08, 0.264591, -1.62373e-08)
bones/11/rotation = Quaternion(0.496571, -0.00457926, 0.00378607, 0.867976)
bones/12/position = Vector3(1.68672e-08, 0.224576, 1.43556e-08)
bones/12/rotation = Quaternion(5.39003e-09, -0.0042984, 2.95277e-08, 0.999991)
bones/13/position = Vector3(-1.12649e-08, 0.224576, 1.45939e-08)
bones/13/rotation = Quaternion(-0.62921, 0.0218078, -0.0235055, 0.776574)
bones/15/position = Vector3(-0.114094, 0.962278, -0.000336304)
bones/15/rotation = Quaternion(0.94549, -0.00411786, 0.022889, 0.32482)
bones/16/position = Vector3(-7.37473e-09, 0.265026, -1.00141e-08)
bones/16/rotation = Quaternion(-8.00505e-09, 0.00444662, -2.66986e-08, 0.99999)
bones/17/position = Vector3(1.53374e-08, 0.265026, 1.50813e-08)
bones/17/rotation = Quaternion(0.470901, 0.00446454, -0.00263717, 0.882171)
bones/18/position = Vector3(5.66248e-09, 0.225025, 1.02879e-08)
bones/18/rotation = Quaternion(1.93187e-08, -0.00717847, 1.32739e-08, 0.999974)
bones/19/position = Vector3(-9.89348e-10, 0.225025, 1.5938e-08)
bones/19/rotation = Quaternion(-0.683827, -0.0276686, 0.0010701, 0.729119)
bones/21/position = Vector3(0.0305623, 1.40188, 0.0954126)
bones/21/rotation = Quaternion(-0.497066, -0.235428, -0.429662, 0.716164)
bones/22/position = Vector3(0.195587, 1.42658, 0.0283709)
bones/22/rotation = Quaternion(-0.0718848, 0.0276279, 0.990115, -0.117223)
bones/23/rotation = Quaternion(1.16401e-07, -0.0631812, 3.02785e-08, 0.998002)
bones/24/rotation = Quaternion(0.421101, -0.0717099, -0.192243, 0.883501)
bones/25/rotation = Quaternion(2.92133e-08, 0.0466595, 3.04862e-08, 0.998911)
bones/26/rotation = Quaternion(-0.0207759, 0.0466779, -0.165174, 0.98494)
bones/46/position = Vector3(-0.00571518, 1.40467, 0.0964852)
bones/46/rotation = Quaternion(-0.478807, 0.27046, 0.364659, 0.751411)
bones/47/position = Vector3(-0.163207, 1.45468, 0.0296918)
bones/47/rotation = Quaternion(-0.162071, -0.307591, 0.896005, 0.276218)
bones/48/rotation = Quaternion(1.93456e-08, -0.000353807, -1.38172e-08, 1)
bones/49/rotation = Quaternion(0.340885, 0.010872, 0.223763, 0.913022)
bones/50/rotation = Quaternion(-2.90362e-08, -0.023591, -1.02295e-07, 0.999722)
bones/51/rotation = Quaternion(0.192297, -0.0236558, 0.0270198, 0.98068)
bones/71/position = Vector3(0.124425, 1.32023, 0.0165249)
bones/71/rotation = Quaternion(0.0319513, 0.573506, 0.818164, 0.0260451)
bones/72/position = Vector3(-0.114776, 1.33859, 0.0235981)
bones/72/rotation = Quaternion(0.0319513, 0.573505, 0.818164, 0.0260451)

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.970593, -0.232195, -0.0635155, 0.17184, -0.853074, 0.492682, -0.168582, 0.467279, 0.867889, -0.335787, 1.02018, -0.129583)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.876453, -0.47244, -0.0929008, 0.210319, -0.549215, 0.808782, -0.433123, 0.689321, 0.580725, 0.219769, 1.00808, 0.251758)

[node name="RayAttachment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.970593, -0.232195, -0.0635155, 0.17184, -0.853074, 0.492682, -0.168582, 0.467279, 0.867889, -0.335787, 1.02018, -0.129583)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackCast" type="RayCast3D" parent="RigPivot/Rig/RayAttachment"]
unique_name_in_owner = true
transform = Transform3D(-2.46979e-08, 4.17176e-08, 1, 0.996195, 0.0871557, 2.0968e-08, -0.0871557, 0.996195, -4.37114e-08, -0.03, 0.075, -0.05)
target_position = Vector3(0, 1, 0)
collision_mask = 8
script = ExtResource("4_gwnis")

[node name="AreaAttack" parent="RigPivot" instance=ExtResource("6_fhl08")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
collision_mask = 8

[node name="Dash" parent="RigPivot" node_paths=PackedStringArray("player") instance=ExtResource("7_vtle1")]
player = NodePath("../..")

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
