[gd_scene load_steps=8 format=3 uid="uid://c2r4oj44owm85"]

[ext_resource type="Script" uid="uid://ck5xbirpvmua8" path="res://Player/player.gd" id="1_l8h54"]
[ext_resource type="Script" uid="uid://ddufoweys5rgd" path="res://Player/smooth_camera_arm.gd" id="2_4ntmi"]
[ext_resource type="PackedScene" uid="uid://c153mnwgj37cq" path="res://Components/health_component.tscn" id="2_k53q1"]
[ext_resource type="PackedScene" uid="uid://cwef8426rdoyn" path="res://Player/rig.tscn" id="3_btcbx"]
[ext_resource type="Script" uid="uid://b1n2xjomfb150" path="res://Player/attack_cast.gd" id="4_gwnis"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hvfyp"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_l8h54"]

[node name="Player" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_l8h54")

[node name="HealthComponent" parent="." instance=ExtResource("2_k53q1")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_hvfyp")

[node name="SmoothCameraArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.906308, 0.422618, 0, -0.422618, 0.906308, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_l8h54")
spring_length = 4.0
script = ExtResource("2_4ntmi")
target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="Camera3D" type="Camera3D" parent="SmoothCameraArm"]

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("3_btcbx")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(0.0218819, 0.890566, -0.015645)
bones/1/rotation = Quaternion(-0.0524415, 0.00158517, 0.0237465, 0.99834)
bones/2/rotation = Quaternion(0.00568275, -0.00173201, -0.0277737, 0.999597)
bones/3/position = Vector3(-8.04973e-10, 0.18737, -2.06203e-09)
bones/3/rotation = Quaternion(-0.193268, 0.00727428, -0.0236694, 0.980833)
bones/4/rotation = Quaternion(0.370175, -0.00565287, 0.0748003, 0.925929)
bones/6/rotation = Quaternion(-0.170066, -0.0113699, -0.0462379, 0.984282)
bones/7/position = Vector3(0.0218819, 0.890566, -0.015645)
bones/8/position = Vector3(0.0218819, 0.890566, -0.015645)
bones/9/position = Vector3(0.153026, 0.956253, -0.000336248)
bones/9/rotation = Quaternion(0.998658, -0.0154919, -0.0343719, 0.0355113)
bones/10/position = Vector3(-2.11485e-08, 0.264557, 1.38965e-08)
bones/10/rotation = Quaternion(-1.1996e-09, -0.00592062, 8.99684e-09, 0.999983)
bones/11/position = Vector3(-2.1552e-08, 0.264557, 9.55545e-09)
bones/11/rotation = Quaternion(0.50114, -0.00551676, 0.00468852, 0.865336)
bones/12/position = Vector3(1.85533e-08, 0.22454, 1.57007e-08)
bones/12/rotation = Quaternion(2.34779e-08, -0.000457484, 2.56751e-08, 1)
bones/13/position = Vector3(-1.06354e-08, 0.22454, 1.90817e-08)
bones/13/rotation = Quaternion(-0.689345, 0.0249746, -0.0269898, 0.723499)
bones/15/position = Vector3(-0.109262, 0.956253, -0.000336302)
bones/15/rotation = Quaternion(0.940472, -0.010189, 0.0216024, 0.339032)
bones/16/position = Vector3(-1.08402e-08, 0.26428, -5.89252e-09)
bones/16/rotation = Quaternion(-7.70471e-09, 0.0041236, -2.85844e-09, 0.999992)
bones/17/position = Vector3(9.17337e-09, 0.26428, -3.33162e-08)
bones/17/rotation = Quaternion(0.572185, 0.00423425, -0.00326387, 0.820107)
bones/18/position = Vector3(2.50472e-09, 0.223787, 9.81542e-09)
bones/18/rotation = Quaternion(5.05785e-09, -0.00728646, 1.01804e-08, 0.999973)
bones/19/position = Vector3(-1.07302e-09, 0.223787, -9.65929e-09)
bones/19/rotation = Quaternion(-0.676486, -0.0280326, 0.00256053, 0.735918)
bones/21/position = Vector3(0.0371927, 1.39607, 0.0968786)
bones/21/rotation = Quaternion(-0.488945, -0.242368, -0.424625, 0.722416)
bones/22/position = Vector3(0.202425, 1.42536, 0.0319293)
bones/22/rotation = Quaternion(-0.0742779, 0.00779371, 0.987187, -0.141014)
bones/23/rotation = Quaternion(9.22028e-08, -0.0654177, 1.33911e-08, 0.997858)
bones/24/rotation = Quaternion(0.444447, -0.0756411, -0.211644, 0.867152)
bones/25/rotation = Quaternion(3.28899e-07, 0.0403638, -2.95231e-08, 0.999185)
bones/26/rotation = Quaternion(-0.0129265, 0.0403502, -0.167361, 0.984985)
bones/46/position = Vector3(0.000810022, 1.39803, 0.0976182)
bones/46/rotation = Quaternion(-0.479079, 0.261225, 0.373875, 0.749975)
bones/47/position = Vector3(-0.157762, 1.44523, 0.0302975)
bones/47/rotation = Quaternion(-0.127431, -0.273444, 0.920091, 0.249844)
bones/48/rotation = Quaternion(-2.36345e-08, 0.0237274, 4.12434e-08, 0.999719)
bones/49/rotation = Quaternion(0.413968, 0.0372561, 0.254375, 0.873233)
bones/50/rotation = Quaternion(-1.06464e-07, -0.0212194, -6.01907e-08, 0.999775)
bones/51/rotation = Quaternion(0.146387, -0.0211427, 0.0214524, 0.988769)
bones/71/position = Vector3(0.133682, 1.31748, 0.018301)
bones/71/rotation = Quaternion(0.0221308, 0.569876, 0.821223, 0.01855)
bones/72/position = Vector3(-0.106198, 1.33041, 0.0231741)
bones/72/rotation = Quaternion(0.0221308, 0.569876, 0.821223, 0.01855)

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.981879, -0.167434, -0.0887653, 0.0738715, -0.769506, 0.634353, -0.174518, 0.616301, 0.76793, -0.312756, 1.00418, -0.0407892)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.874295, -0.479348, -0.0763765, 0.213921, -0.52176, 0.825835, -0.435713, 0.705686, 0.558715, 0.239974, 1.01341, 0.247571)

[node name="RayAttachment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.981879, -0.167434, -0.0887653, 0.0738715, -0.769506, 0.634353, -0.174518, 0.616301, 0.76793, -0.312756, 1.00418, -0.0407892)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackCast" type="RayCast3D" parent="RigPivot/Rig/RayAttachment"]
unique_name_in_owner = true
transform = Transform3D(-2.46979e-08, 4.17176e-08, 1, 0.996195, 0.0871557, 2.0968e-08, -0.0871557, 0.996195, -4.37114e-08, -0.03, 0.075, -0.05)
target_position = Vector3(0, 1, 0)
collision_mask = 8
script = ExtResource("4_gwnis")

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
